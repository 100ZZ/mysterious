import{d as L,r as A,a as w,E as ae,c9 as ue,ca as te,cb as oe,b as ne,o as F,c as se,e as E,f as e,w as u,u as o,g as i,s as de,h as z,p as re,j as b,a7 as x,i as k,cc as ie,k as pe,l as ce,_ as me}from"./index.d1c56d25.js";import{E as fe,a as _e,b as ge}from"./el-form-item.7f52e4c1.js";import"./el-overlay.1efca428.js";import{s as B,E as Fe,a as m}from"./request.207160df.js";import{E as be,f as Be,a as Ve,b as ye,h as Ee,j as ve,c as Ce,d as he}from"./push.60176e2f.js";import{f as we}from"./testcase.6802f026.js";const ke=d=>B({url:"/node/add",method:"post",data:d}),De=(d,D)=>B({url:"/node/update/"+d,method:"post",data:D}),Ue=d=>B({url:"/node/list",method:"get",params:d}),Ae=d=>B({url:"/node/delete/"+d,method:"get"}),xe=d=>B({url:"/node/enable/"+d,method:"get"}),Te=d=>B({url:"/node/disable/"+d,method:"get"}),P=d=>{switch(d){case 0:return"Slave";case 1:return"Master";default:return d}},Ne=d=>{switch(d){case"Slave":return 0;case"Master":return 1;default:return d}},Ie={class:"container"},Me={class:"handle-box"},$e={class:"pagination"},Se={class:"dialog-footer"},ze={class:"dialog-footer"},Pe=L({name:"baseNode"}),Le=L({...Pe,setup(d){const D=t=>P(t.type),f=A({name:null,host:null,page:1,size:10}),T=w([]),N=w(0),g=()=>{Ue(f).then(t=>{if(Ce(t.data.message),t.data.code!=0)return m.error(t.data.message),!1;T.value=t.data.data.list,N.value=t.data.data.total||10})};g();const j=()=>{f.page=1,g()},q=()=>{f.name=null,f.host=null,g()},O=t=>{f.page=t,g()},V=w(!1);let s=A({name:null,description:null,type:null,host:null,port:null,username:null,password:null});const R=t=>{s.name=t.name,s.description=t.description,s.type=t.nodeType,s.host=t.host,s.port=t.port,s.username=t.username,s.password=t.password,V.value=!0},G=async()=>{const t=await ke(s);t.data.code!==0?m.error(t.data.message):(m.success("\u65B0\u589E\u6210\u529F"),V.value=!1,await g())},H=async t=>{await he.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const l=await Ae(t);l.data.code!=0?m.error(l.data.message):(m.success("\u5220\u9664\u6210\u529F"),await g())},y=w(!1);let n=A({id:null,name:null,description:null,type:null,host:null,port:null,username:null});const J=t=>{n.id=t.id,n.name=t.name,n.description=t.description,n.type=P(t.type),n.host=t.host,n.port=t.port,n.username=t.username,y.value=!0},K=async()=>{n.type=Ne(n.type);const t=await De(n.id,n);t.data.code!=0?m.error(t.data.message):(m.success("\u7F16\u8F91\u6210\u529F"),y.value=!1,await g())},Q=async t=>{const l=await xe(t);l.data.code!=0?m.error(l.data.message):m.success("\u542F\u7528\u6210\u529F"),await g()},W=async t=>{const l=await Te(t);l.data.code!=0?m.error(l.data.message):(m.success("\u7981\u7528\u6210\u529F"),await g())},X=async t=>{const l=await we(t);l.data.code!=0?m.error(l.data.message):(m.success("\u540C\u6B65\u6210\u529F"),await g())};return(t,l)=>{const r=Fe,_=ae,p=be,U=Be,I=ue,Y=te,Z=oe,ee=Ve,le=ye,c=fe,v=Ee,M=ve,$=_e,S=ge,C=ne("permiss");return F(),se("div",null,[E("div",Ie,[E("div",Me,[e(r,{modelValue:f.name,"onUpdate:modelValue":l[0]||(l[0]=a=>f.name=a),placeholder:"\u8282\u70B9\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),e(r,{modelValue:f.host,"onUpdate:modelValue":l[1]||(l[1]=a=>f.host=a),placeholder:"\u8282\u70B9\u5730\u5740",class:"handle-input mr10"},null,8,["modelValue"]),e(_,{type:"primary",icon:o(de),onClick:j},{default:u(()=>[i("\u641C\u7D22")]),_:1},8,["icon"]),e(_,{type:"primary",icon:o(z),onClick:q},{default:u(()=>[i("\u91CD\u7F6E")]),_:1},8,["icon"]),e(_,{type:"primary",icon:o(re),onClick:R},{default:u(()=>[i("\u65B0\u589E")]),_:1},8,["icon"])]),e(ee,{data:T.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:u(()=>[e(p,{prop:"id",label:"ID",width:"55",align:"center"}),e(p,{prop:"name",label:"\u8282\u70B9\u540D\u79F0",align:"center"}),e(p,{prop:"description",label:"\u8282\u70B9\u63CF\u8FF0",align:"center"}),e(p,{prop:"type",label:"\u8282\u70B9\u7C7B\u578B",formatter:D,align:"center"}),e(p,{prop:"host",label:"\u767B\u5F55\u5730\u5740",align:"center"}),e(p,{prop:"port",label:"\u767B\u5F55\u7AEF\u53E3",align:"center"}),e(p,{prop:"username",label:"\u767B\u5F55\u7528\u6237",align:"center"}),e(p,{prop:"password",label:"\u767B\u5F55\u5BC6\u7801",align:"center"}),e(p,{prop:"status",label:"\u8282\u70B9\u72B6\u6001",align:"center"},{default:u(a=>[a.row.status===0?(F(),b(U,{key:0,type:"warning"},{default:u(()=>[i("\u7981\u7528\u4E2D")]),_:1})):x("",!0),a.row.status===1?(F(),b(U,{key:1,type:"success"},{default:u(()=>[i("\u542F\u7528\u4E2D")]),_:1})):x("",!0),a.row.status===2?(F(),b(U,{key:2,type:"danger"},{default:u(()=>[i("\u542F\u52A8\u5931\u8D25")]),_:1})):x("",!0)]),_:1}),e(p,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),e(p,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),e(p,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),e(p,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),e(p,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:u(a=>[e(Z,{class:"group-status",trigger:"click"},{dropdown:u(()=>[e(Y,null,{default:u(()=>[e(I,{onClick:h=>Q(a.row.id)},{default:u(()=>[i("\u542F\u7528")]),_:2},1032,["onClick"]),e(I,{onClick:h=>W(a.row.id)},{default:u(()=>[i("\u7981\u7528")]),_:2},1032,["onClick"])]),_:2},1024)]),default:u(()=>[k((F(),b(_,{style:{"margin-left":"0"},text:"",icon:o(ie),class:"bg-blue"},{default:u(()=>[i("\u64CD\u4F5C")]),_:1},8,["icon"])),[[C,1]])]),_:2},1024),k((F(),b(_,{style:{"margin-left":"0"},text:"",icon:o(z),class:"bg-blue",onClick:h=>X(a.row.id)},{default:u(()=>[i(" \u540C\u6B65 ")]),_:2},1032,["icon","onClick"])),[[C,1]]),k((F(),b(_,{style:{"margin-left":"0"},text:"",icon:o(pe),class:"bg-blue",onClick:h=>J(a.row)},{default:u(()=>[i(" \u7F16\u8F91 ")]),_:2},1032,["icon","onClick"])),[[C,1]]),k((F(),b(_,{style:{"margin-left":"0"},text:"",icon:o(ce),class:"red",onClick:h=>H(a.row.id)},{default:u(()=>[i(" \u5220\u9664 ")]),_:2},1032,["icon","onClick"])),[[C,1]])]),_:1})]),_:1},8,["data"]),E("div",$e,[e(le,{background:"",layout:"total, prev, pager, next","current-page":f.page,"page-size":f.size,total:N.value,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),e(S,{title:"\u65B0\u589E",modelValue:V.value,"onUpdate:modelValue":l[10]||(l[10]=a=>V.value=a),width:"30%"},{footer:u(()=>[E("span",Se,[e(_,{onClick:l[9]||(l[9]=a=>V.value=!1)},{default:u(()=>[i("\u53D6 \u6D88")]),_:1}),e(_,{type:"primary",onClick:G},{default:u(()=>[i("\u786E \u5B9A")]),_:1})])]),default:u(()=>[e($,{"label-width":"70px"},{default:u(()=>[e(c,{label:"\u8282\u70B9\u540D\u79F0"},{default:u(()=>[e(r,{modelValue:o(s).name,"onUpdate:modelValue":l[2]||(l[2]=a=>o(s).name=a),placeholder:"\u8282\u70B9\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:u(()=>[e(r,{modelValue:o(s).description,"onUpdate:modelValue":l[3]||(l[3]=a=>o(s).description=a),placeholder:"\u8282\u70B9\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[e(M,{modelValue:o(s).type,"onUpdate:modelValue":l[4]||(l[4]=a=>o(s).type=a),placeholder:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[e(v,{key:"0",label:"Slave",value:"0"}),e(v,{key:"1",label:"Master",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u5730\u5740"},{default:u(()=>[e(r,{modelValue:o(s).host,"onUpdate:modelValue":l[5]||(l[5]=a=>o(s).host=a),placeholder:"\u8282\u70B9IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u7AEF\u53E3"},{default:u(()=>[e(r,{modelValue:o(s).port,"onUpdate:modelValue":l[6]||(l[6]=a=>o(s).port=a),placeholder:"ssh\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u7528\u6237"},{default:u(()=>[e(r,{modelValue:o(s).username,"onUpdate:modelValue":l[7]||(l[7]=a=>o(s).username=a),placeholder:"ssh\u7528\u6237"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u5BC6\u7801"},{default:u(()=>[e(r,{modelValue:o(s).password,"onUpdate:modelValue":l[8]||(l[8]=a=>o(s).password=a),placeholder:"\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,{title:"\u7F16\u8F91",modelValue:y.value,"onUpdate:modelValue":l[19]||(l[19]=a=>y.value=a),width:"30%"},{footer:u(()=>[E("span",ze,[e(_,{onClick:l[18]||(l[18]=a=>y.value=!1)},{default:u(()=>[i("\u53D6 \u6D88")]),_:1}),e(_,{type:"primary",onClick:K},{default:u(()=>[i("\u786E \u5B9A")]),_:1})])]),default:u(()=>[e($,{"label-width":"70px"},{default:u(()=>[e(c,{label:"ID"},{default:u(()=>[e(r,{modelValue:o(n).id,"onUpdate:modelValue":l[11]||(l[11]=a=>o(n).id=a),disabled:""},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8282\u70B9\u540D\u79F0"},{default:u(()=>[e(r,{modelValue:o(n).name,"onUpdate:modelValue":l[12]||(l[12]=a=>o(n).name=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:u(()=>[e(r,{modelValue:o(n).description,"onUpdate:modelValue":l[13]||(l[13]=a=>o(n).description=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[e(M,{modelValue:o(n).type,"onUpdate:modelValue":l[14]||(l[14]=a=>o(n).type=a),placeholder:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[e(v,{key:"0",label:"Slave",value:"0"}),e(v,{key:"1",label:"Master",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u5730\u5740"},{default:u(()=>[e(r,{modelValue:o(n).host,"onUpdate:modelValue":l[15]||(l[15]=a=>o(n).host=a),placeholder:"\u8282\u70B9IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u7AEF\u53E3"},{default:u(()=>[e(r,{modelValue:o(n).port,"onUpdate:modelValue":l[16]||(l[16]=a=>o(n).port=a),placeholder:"ssh\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u767B\u5F55\u7528\u6237"},{default:u(()=>[e(r,{modelValue:o(n).username,"onUpdate:modelValue":l[17]||(l[17]=a=>o(n).username=a),placeholder:"ssh\u7528\u6237"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Je=me(Le,[["__scopeId","data-v-8d2b501c"]]);export{Je as default};
