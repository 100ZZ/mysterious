import{d as I,ch as N,r as w,ci as S,a as x,cj as U,o as K,c as A,e as p,f as e,w as u,u as a,ck as g,bc as y,cl as v,g as _,E as L,cm as T,cn as q,_ as R}from"./index.7d19d52a.js";import{E as $,a as j,b as J}from"./el-form-item.38271802.js";import"./el-overlay.d904f775.js";import{a as f,E as M}from"./request.d7d01389.js";import{l as O,a as P}from"./user.1bf450de.js";const F=c=>(T("data-v-2970d48b"),c=c(),q(),c),z={class:"login-wrap"},G={class:"ms-login"},H=F(()=>p("div",{class:"ms-title"},"\u5206\u5E03\u5F0F\u538B\u6D4B\u5E73\u53F0",-1)),Q={class:"login-btn"},W={class:"login-btn"},X=F(()=>p("p",{class:"login-tips"},"\u65E0\u6CD5\u89E3\u5BC6\uFF0C\u8BF7\u7262\u8BB0\u4F60\u7684\u7528\u6237\u540D\u5BC6\u7801\u3002",-1)),Y=F(()=>p("p",{class:"login-tips"},"\u65E0\u6CD5\u89E3\u5BC6\uFF0C\u8BF7\u7262\u8BB0\u4F60\u7684\u7528\u6237\u540D\u5BC6\u7801\u3002",-1)),Z={class:"dialog-footer"},ee=I({__name:"login",setup(c){const D=N(),r=w({username:null,password:null}),C={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},E=S(),B=()=>{O(r).then(t=>{if(t.data.code!=0)return f.error(t.data.message),!1;const n=t.data.data;localStorage.setItem("token",n),f.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("ms_username",r.username);const d=E.defaultList[r.username=="admin"?"admin":"demo"];E.handleSet(d),localStorage.setItem("ms_keys",JSON.stringify(d)),D.push("/")})},m=x(!1);let l=w({username:null,password:null,realName:null});const b=t=>{l.username=t.username,l.password=t.password,l.realName=t.realName,m.value=!0},h=async()=>{const t=await P(l);t.data.code!==0?f.error(t.data.message):(f.success("\u6CE8\u518C\u6210\u529F"),m.value=!1)};return U().clearTags(),(t,s)=>{const n=L,d=M,i=$,V=j,k=J;return K(),A("div",z,[p("div",G,[H,e(V,{model:r,rules:C,ref:"userLogin","label-width":"0px",class:"ms-content"},{default:u(()=>[e(i,{prop:"username"},{default:u(()=>[e(d,{modelValue:r.username,"onUpdate:modelValue":s[0]||(s[0]=o=>r.username=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prepend:u(()=>[e(n,{icon:a(g)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"password"},{default:u(()=>[e(d,{type:"password",placeholder:"\u8BF7\u4E0D\u8981\u7528\u79C1\u4EBA\u5BC6\u7801",modelValue:r.password,"onUpdate:modelValue":s[1]||(s[1]=o=>r.password=o),onKeyup:y(B,["enter"])},{prepend:u(()=>[e(n,{icon:a(v)},null,8,["icon"])]),_:1},8,["modelValue","onKeyup"])]),_:1}),p("div",Q,[e(n,{type:"primary",onClick:B},{default:u(()=>[_("\u767B\u5F55")]),_:1})]),p("div",W,[e(n,{type:"primary",onClick:b},{default:u(()=>[_("\u6CE8\u518C")]),_:1})]),X]),_:1},8,["model"]),e(k,{title:"\u65B0\u7528\u6237\u6CE8\u518C",modelValue:m.value,"onUpdate:modelValue":s[6]||(s[6]=o=>m.value=o),width:"30%"},{footer:u(()=>[p("span",Z,[e(n,{onClick:s[5]||(s[5]=o=>m.value=!1)},{default:u(()=>[_("\u53D6 \u6D88")]),_:1}),e(n,{type:"primary",onClick:h},{default:u(()=>[_("\u786E \u5B9A")]),_:1})])]),default:u(()=>[e(V,{model:a(l),rules:C,ref:"userRegister","label-width":"0px",class:"ms-content"},{default:u(()=>[e(i,{prop:"username"},{default:u(()=>[e(d,{modelValue:a(l).username,"onUpdate:modelValue":s[2]||(s[2]=o=>a(l).username=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prepend:u(()=>[e(n,{icon:a(g)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"password"},{default:u(()=>[e(d,{type:"password",placeholder:"\u8BF7\u4E0D\u8981\u7528\u79C1\u4EBA\u5BC6\u7801\uFF0C\u65E0\u6CD5\u89E3\u5BC6\uFF0C\u5BC6\u7801\u8BF7\u7262\u8BB0",modelValue:a(l).password,"onUpdate:modelValue":s[3]||(s[3]=o=>a(l).password=o),onKeyup:y(B,["enter"])},{prepend:u(()=>[e(n,{icon:a(v)},null,8,["icon"])]),_:1},8,["modelValue","onKeyup"])]),_:1}),e(i,{prop:"readName"},{default:u(()=>[e(d,{modelValue:a(l).realName,"onUpdate:modelValue":s[4]||(s[4]=o=>a(l).realName=o),placeholder:"\u771F\u5B9E\u59D3\u540D"},{prepend:u(()=>[e(n,{icon:a(g)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),Y]),_:1},8,["model"])]),_:1},8,["modelValue"])])])}}});const ne=R(ee,[["__scopeId","data-v-2970d48b"]]);export{ne as default};
