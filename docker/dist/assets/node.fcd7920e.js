import{d as q,r as T,a as D,E as ue,cn as oe,co as ne,cp as se,b as de,o as b,c as re,e as B,f as l,w as t,u as o,g as i,s as ie,h as j,p as pe,j as g,a8 as N,i as A,cq as me,k as ce,l as fe,_ as Fe}from"./index.be563b26.js";import{E as _e,a as be,b as ge}from"./el-form-item.78a1ed3b.js";import"./el-overlay.b28502a2.js";import{E as Ve,e as Ee,a as ye,b as Be,g as Ce,h as ve,c as we}from"./push.c592f5c4.js";import{E as ke,a as De}from"./el-col.8592395d.js";import{s as V,E as Ae,a as c}from"./request.df42d19a.js";import{h as Ue}from"./testcase.716bffdc.js";import{E as xe}from"./index.358d8903.js";const Te=d=>V({url:"/node/add",method:"post",data:d}),Ne=(d,U)=>V({url:"/node/update/"+d,method:"post",data:U}),Ie=d=>V({url:"/node/list",method:"get",params:d}),Me=d=>V({url:"/node/delete/"+d,method:"get"}),$e=d=>V({url:"/node/enable/"+d,method:"get"}),Se=d=>V({url:"/node/disable/"+d,method:"get"}),L=d=>{switch(d){case 0:return"Slave";case 1:return"Master";default:return d}},he=d=>{switch(d){case"Slave":return 0;case"Master":return 1;default:return d}},ze={class:"container"},Pe={class:"handle-box"},je={class:"pagination"},Le={class:"dialog-footer"},qe={class:"dialog-footer"},Re=q({name:"baseNode"}),Oe=q({...Re,setup(d){const U=u=>L(u.type),f=T({name:null,host:null,page:1,size:10}),I=D([]),M=D(0),_=()=>{Ie(f).then(u=>{if(we(u.data.message),u.data.code!=0)return c.error(u.data.message),!1;I.value=u.data.data.list,M.value=u.data.data.total||10})};_();const R=()=>{f.page=1,_()},O=()=>{f.name=null,f.host=null,_()},G=u=>{f.page=u,_()},E=D(!1);let s=T({name:null,description:null,type:null,host:null,port:null,username:null,password:null});const H=u=>{s.name=u.name,s.description=u.description,s.type=u.nodeType,s.host=u.host,s.port=u.port,s.username=u.username,s.password=u.password,E.value=!0},J=async()=>{const u=await Te(s);u.data.code!==0?c.error(u.data.message):(c.success("\u65B0\u589E\u6210\u529F"),E.value=!1,await _())},K=async u=>{await xe.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await Me(u);e.data.code!=0?c.error(e.data.message):(c.success("\u5220\u9664\u6210\u529F"),await _())},y=D(!1);let n=T({id:null,name:null,description:null,type:null,host:null,port:null,username:null});const Q=u=>{n.id=u.id,n.name=u.name,n.description=u.description,n.type=L(u.type),n.host=u.host,n.port=u.port,n.username=u.username,y.value=!0},W=async()=>{n.type=he(n.type);const u=await Ne(n.id,n);u.data.code!=0?c.error(u.data.message):(c.success("\u7F16\u8F91\u6210\u529F"),y.value=!1,await _())},X=async u=>{const e=await $e(u);e.data.code!=0?c.error(e.data.message):c.success("\u542F\u7528\u6210\u529F"),await _()},Y=async u=>{const e=await Se(u);e.data.code!=0?c.error(e.data.message):(c.success("\u7981\u7528\u6210\u529F"),await _())},Z=async u=>{const e=await Ue(u);e.data.code!=0?c.error(e.data.message):(c.success("\u540C\u6B65\u6210\u529F"),await _())};return(u,e)=>{const r=Ae,F=ue,p=Ve,x=Ee,$=oe,ee=ne,le=se,C=ke,S=De,te=ye,ae=Be,m=_e,v=Ce,h=ve,z=be,P=ge,w=de("permiss");return b(),re("div",null,[B("div",ze,[B("div",Pe,[l(r,{modelValue:f.name,"onUpdate:modelValue":e[0]||(e[0]=a=>f.name=a),placeholder:"\u8282\u70B9\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),l(r,{modelValue:f.host,"onUpdate:modelValue":e[1]||(e[1]=a=>f.host=a),placeholder:"\u8282\u70B9\u5730\u5740",class:"handle-input mr10"},null,8,["modelValue"]),l(F,{type:"primary",icon:o(ie),onClick:R},{default:t(()=>e[20]||(e[20]=[i("\u641C\u7D22")])),_:1},8,["icon"]),l(F,{type:"primary",icon:o(j),onClick:O},{default:t(()=>e[21]||(e[21]=[i("\u91CD\u7F6E")])),_:1},8,["icon"]),l(F,{type:"primary",icon:o(pe),onClick:H},{default:t(()=>e[22]||(e[22]=[i("\u65B0\u589E")])),_:1},8,["icon"])]),l(te,{data:I.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:t(()=>[l(p,{prop:"id",label:"\u7F16\u53F7",width:"55",align:"center"}),l(p,{prop:"name",label:"\u540D\u79F0",align:"center"}),l(p,{prop:"description",label:"\u63CF\u8FF0",align:"center"}),l(p,{prop:"type",label:"\u7C7B\u578B",formatter:U,align:"center"}),l(p,{prop:"host",label:"\u5730\u5740",align:"center"}),l(p,{prop:"port",label:"\u7AEF\u53E3",align:"center"}),l(p,{prop:"username",label:"\u7528\u6237",align:"center"}),l(p,{prop:"password",label:"\u5BC6\u7801",align:"center"}),l(p,{prop:"status",label:"\u72B6\u6001",align:"center"},{default:t(a=>[a.row.status===0?(b(),g(x,{key:0,class:"disabled"},{default:t(()=>e[23]||(e[23]=[i("\u7981\u7528\u4E2D")])),_:1})):N("",!0),a.row.status===1?(b(),g(x,{key:1,class:"enabled"},{default:t(()=>e[24]||(e[24]=[i("\u542F\u7528\u4E2D")])),_:1})):N("",!0),a.row.status===2?(b(),g(x,{key:2,class:"failed"},{default:t(()=>e[25]||(e[25]=[i("\u542F\u52A8\u5931\u8D25")])),_:1})):N("",!0)]),_:1}),l(p,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),l(p,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),l(p,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),l(p,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),l(p,{label:"\u64CD\u4F5C",width:"200",align:"center"},{default:t(a=>[l(S,{type:"flex",justify:"center"},{default:t(()=>[l(C,{span:12},{default:t(()=>[l(le,{class:"group-status",trigger:"click"},{dropdown:t(()=>[l(ee,{class:"horizontal-dropdown-menu"},{default:t(()=>[l($,{style:{backgroundColor:"#D1E7DD",color:"#4CAF50"},onClick:k=>X(a.row.id)},{default:t(()=>e[27]||(e[27]=[i("\u542F\u7528")])),_:2},1032,["onClick"]),l($,{style:{backgroundColor:"#FFCDD2",color:"#EF5350"},onClick:k=>Y(a.row.id)},{default:t(()=>e[28]||(e[28]=[i("\u7981\u7528")])),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[A((b(),g(F,{text:"",icon:o(me),class:"bg-blue"},{default:t(()=>e[26]||(e[26]=[i("\u64CD\u4F5C")])),_:1},8,["icon"])),[[w,1]])]),_:2},1024)]),_:2},1024),l(C,{span:12},{default:t(()=>[A((b(),g(F,{text:"",icon:o(j),class:"bg-blue",onClick:k=>Z(a.row.id)},{default:t(()=>e[29]||(e[29]=[i(" \u540C\u6B65 ")])),_:2},1032,["icon","onClick"])),[[w,1]])]),_:2},1024)]),_:2},1024),l(S,{type:"flex",justify:"center"},{default:t(()=>[l(C,{span:12},{default:t(()=>[A((b(),g(F,{text:"",icon:o(ce),class:"bg-blue",onClick:k=>Q(a.row)},{default:t(()=>e[30]||(e[30]=[i(" \u7F16\u8F91 ")])),_:2},1032,["icon","onClick"])),[[w,1]])]),_:2},1024),l(C,{span:12},{default:t(()=>[A((b(),g(F,{text:"",icon:o(fe),class:"red",onClick:k=>K(a.row.id)},{default:t(()=>e[31]||(e[31]=[i(" \u5220\u9664 ")])),_:2},1032,["icon","onClick"])),[[w,1]])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"]),B("div",je,[l(ae,{background:"",layout:"total, prev, pager, next","current-page":f.page,"page-size":f.size,total:M.value,onCurrentChange:G},null,8,["current-page","page-size","total"])])]),l(P,{title:"\u65B0\u589E",modelValue:E.value,"onUpdate:modelValue":e[10]||(e[10]=a=>E.value=a),width:"30%"},{footer:t(()=>[B("span",Le,[l(F,{onClick:e[9]||(e[9]=a=>E.value=!1)},{default:t(()=>e[32]||(e[32]=[i("\u53D6 \u6D88")])),_:1}),l(F,{type:"primary",onClick:J},{default:t(()=>e[33]||(e[33]=[i("\u786E \u5B9A")])),_:1})])]),default:t(()=>[l(z,{"label-width":"70px"},{default:t(()=>[l(m,{label:"\u8282\u70B9\u540D\u79F0"},{default:t(()=>[l(r,{modelValue:o(s).name,"onUpdate:modelValue":e[2]||(e[2]=a=>o(s).name=a),placeholder:"\u8282\u70B9\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:t(()=>[l(r,{modelValue:o(s).description,"onUpdate:modelValue":e[3]||(e[3]=a=>o(s).description=a),placeholder:"\u8282\u70B9\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u8282\u70B9\u7C7B\u578B"},{default:t(()=>[l(h,{modelValue:o(s).type,"onUpdate:modelValue":e[4]||(e[4]=a=>o(s).type=a),placeholder:"\u8282\u70B9\u7C7B\u578B"},{default:t(()=>[l(v,{key:"0",label:"Slave",value:"0"}),l(v,{key:"1",label:"Master",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u5730\u5740"},{default:t(()=>[l(r,{modelValue:o(s).host,"onUpdate:modelValue":e[5]||(e[5]=a=>o(s).host=a),placeholder:"\u8282\u70B9IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u7AEF\u53E3"},{default:t(()=>[l(r,{modelValue:o(s).port,"onUpdate:modelValue":e[6]||(e[6]=a=>o(s).port=a),placeholder:"ssh\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u7528\u6237"},{default:t(()=>[l(r,{modelValue:o(s).username,"onUpdate:modelValue":e[7]||(e[7]=a=>o(s).username=a),placeholder:"ssh\u7528\u6237"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u5BC6\u7801"},{default:t(()=>[l(r,{modelValue:o(s).password,"onUpdate:modelValue":e[8]||(e[8]=a=>o(s).password=a),placeholder:"\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(P,{title:"\u7F16\u8F91",modelValue:y.value,"onUpdate:modelValue":e[19]||(e[19]=a=>y.value=a),width:"30%"},{footer:t(()=>[B("span",qe,[l(F,{onClick:e[18]||(e[18]=a=>y.value=!1)},{default:t(()=>e[34]||(e[34]=[i("\u53D6 \u6D88")])),_:1}),l(F,{type:"primary",onClick:W},{default:t(()=>e[35]||(e[35]=[i("\u786E \u5B9A")])),_:1})])]),default:t(()=>[l(z,{"label-width":"70px"},{default:t(()=>[l(m,{label:"\u7F16\u53F7"},{default:t(()=>[l(r,{modelValue:o(n).id,"onUpdate:modelValue":e[11]||(e[11]=a=>o(n).id=a),disabled:""},null,8,["modelValue"])]),_:1}),l(m,{label:"\u8282\u70B9\u540D\u79F0"},{default:t(()=>[l(r,{modelValue:o(n).name,"onUpdate:modelValue":e[12]||(e[12]=a=>o(n).name=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:t(()=>[l(r,{modelValue:o(n).description,"onUpdate:modelValue":e[13]||(e[13]=a=>o(n).description=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"\u8282\u70B9\u7C7B\u578B"},{default:t(()=>[l(h,{modelValue:o(n).type,"onUpdate:modelValue":e[14]||(e[14]=a=>o(n).type=a),placeholder:"\u8282\u70B9\u7C7B\u578B"},{default:t(()=>[l(v,{key:"0",label:"Slave",value:"0"}),l(v,{key:"1",label:"Master",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u5730\u5740"},{default:t(()=>[l(r,{modelValue:o(n).host,"onUpdate:modelValue":e[15]||(e[15]=a=>o(n).host=a),placeholder:"\u8282\u70B9IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u7AEF\u53E3"},{default:t(()=>[l(r,{modelValue:o(n).port,"onUpdate:modelValue":e[16]||(e[16]=a=>o(n).port=a),placeholder:"ssh\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u767B\u5F55\u7528\u6237"},{default:t(()=>[l(r,{modelValue:o(n).username,"onUpdate:modelValue":e[17]||(e[17]=a=>o(n).username=a),placeholder:"ssh\u7528\u6237"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Ze=Fe(Oe,[["__scopeId","data-v-482e5ffc"]]);export{Ze as default};
