import{d as T,a as F,co as $,r as J,E as O,b as P,o as d,c as S,e as y,f as t,w as o,u as g,g as r,s as V,h as G,j as i,a8 as f,i as B,cp as H,cq as K,l as Q,a7 as W,_ as X}from"./index.92c5e7a1.js";import{E as Y}from"./el-drawer.9c543e39.js";import"./el-overlay.ab8eeb07.js";import{E as Z,e as ee,a as te,b as ae,c as oe}from"./push.1108f912.js";import{s as b,E as le,a as C}from"./request.e7e7edc0.js";import{E as ne}from"./index.f8bc23f2.js";const ue=s=>b({url:"/report/listByTestCase",method:"get",params:s}),re=async s=>{try{const c=await b({url:"/report/download/"+s,method:"get",responseType:"blob"}),_=window.URL.createObjectURL(new Blob([c.data])),l=document.createElement("a");return l.href=_,l.setAttribute("download",s+"_data.zip"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(_),{success:!0}}catch(c){return console.error("Error downloading file:",c),{success:!1,error:c}}},se=s=>b({url:"/report/getJMeterLog/"+s,method:"get"}),de=s=>b({url:"/report/clean/"+s,method:"get"}),ie=s=>b({url:"/report/view/"+s,method:"get"}),ce={class:"container"},pe={class:"handle-box"},me={class:"pagination"},ge=["textContent"],fe=T({name:"baseJmx"}),_e=T({...fe,setup(s){const c=F(!1),_=$(),l=J({name:_.query.name||null,testCaseId:_.query.testCaseId||null,page:1,size:10}),D=F([]),x=F(0),w=()=>{ue(l).then(n=>{if(oe(n.data.message),n.data.code!=0)return C.error(n.data.message),!1;D.value=n.data.data.list,x.value=n.data.data.total||10})};w();const h=()=>{l.page=1,w()},L=()=>{l.name=null,l.testCaseId=null,w()},R=n=>{l.page=n,w()},I=async n=>{await ne.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await de(n);e.data.code!=0?C.error(e.data.message):(C.success("\u5220\u9664\u6210\u529F"),await w())},U=async n=>{(await re(n)).success||C.error("\u4E0B\u8F7D\u5931\u8D25, \u8BF7\u91CD\u8BD5")},z=async n=>{const e=await ie(n);e.data.code!=0?C.error(e.data.message):window.open(e.data.data,"_blank")},A=F(""),j=async n=>{const e=await se(n);console.log("res: ",e),A.value=e.data};return(n,e)=>{const E=le,p=O,u=Z,m=ee,q=te,M=ae,N=Y,v=P("permiss");return d(),S("div",null,[y("div",ce,[y("div",pe,[t(E,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.name=a),placeholder:"\u62A5\u544A\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),t(E,{modelValue:l.testCaseId,"onUpdate:modelValue":e[1]||(e[1]=a=>l.testCaseId=a),placeholder:"\u7528\u4F8B",class:"handle-input mr10"},null,8,["modelValue"]),t(p,{type:"primary",icon:g(V),onClick:h},{default:o(()=>e[3]||(e[3]=[r("\u641C\u7D22")])),_:1},8,["icon"]),t(p,{type:"primary",icon:g(G),onClick:L},{default:o(()=>e[4]||(e[4]=[r("\u91CD\u7F6E")])),_:1},8,["icon"])]),t(q,{data:D.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[t(u,{prop:"id",label:"\u7F16\u53F7",width:"55",align:"center"}),t(u,{prop:"name",label:"\u540D\u79F0",align:"center"}),t(u,{prop:"description",label:"\u63CF\u8FF0",align:"center"}),t(u,{prop:"testCaseId",label:"\u7528\u4F8B",align:"center"}),t(u,{prop:"execType",label:"\u7C7B\u578B",align:"center"},{default:o(a=>[a.row.execType===1?(d(),i(m,{key:0,type:"primary"},{default:o(()=>e[5]||(e[5]=[r("\u8C03\u8BD5")])),_:1})):f("",!0),a.row.execType===2?(d(),i(m,{key:1,type:"danger"},{default:o(()=>e[6]||(e[6]=[r("\u538B\u6D4B")])),_:1})):f("",!0)]),_:1}),t(u,{prop:"status",label:"\u72B6\u6001",align:"center"},{default:o(a=>[a.row.status===0?(d(),i(m,{key:0,type:"info"},{default:o(()=>e[7]||(e[7]=[r("\u6CA1\u6709\u6267\u884C")])),_:1})):f("",!0),a.row.status===1?(d(),i(m,{key:1,type:"warning"},{default:o(()=>e[8]||(e[8]=[r("\u6B63\u5728\u6267\u884C")])),_:1})):f("",!0),a.row.status===2?(d(),i(m,{key:2,type:"success"},{default:o(()=>e[9]||(e[9]=[r("\u6267\u884C\u6210\u529F")])),_:1})):f("",!0),a.row.status===3?(d(),i(m,{key:3,type:"danger"},{default:o(()=>e[10]||(e[10]=[r("\u6267\u884C\u5F02\u5E38")])),_:1})):f("",!0)]),_:1}),t(u,{prop:"responseData",label:"\u7ED3\u679C",align:"center"}),t(u,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),t(u,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),t(u,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),t(u,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),t(u,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:o(a=>[B((d(),i(p,{style:{"margin-left":"0"},text:"",icon:g(V),class:"bg-blue",onClick:k=>(c.value=!0,j(a.row.id))},{default:o(()=>e[11]||(e[11]=[r(" \u67E5\u770B\u65E5\u5FD7 ")])),_:2},1032,["icon","onClick"])),[[v,1]]),B((d(),i(p,{style:{"margin-left":"0"},text:"",icon:g(H),class:"bg-blue",onClick:k=>U(a.row.id)},{default:o(()=>e[12]||(e[12]=[r(" \u62A5\u544A\u4E0B\u8F7D ")])),_:2},1032,["icon","onClick"])),[[v,1]]),B((d(),i(p,{style:{"margin-left":"0"},text:"",icon:g(K),class:"bg-blue",onClick:k=>z(a.row.id)},{default:o(()=>e[13]||(e[13]=[r(" \u62A5\u544A\u9884\u89C8 ")])),_:2},1032,["icon","onClick"])),[[v,1]]),B((d(),i(p,{style:{"margin-left":"0"},text:"",icon:g(Q),class:"red",onClick:k=>I(a.row.id)},{default:o(()=>e[14]||(e[14]=[r(" \u5220\u9664\u62A5\u544A ")])),_:2},1032,["icon","onClick"])),[[v,1]])]),_:1})]),_:1},8,["data"]),y("div",me,[t(M,{background:"",layout:"total, prev, pager, next","current-page":l.page,"page-size":l.size,total:x.value,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),t(N,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),title:"jmeter.log\u65E5\u5FD7","show-close":!0,"with-header":!0,size:"60%"},{default:o(()=>[y("pre",null,[y("div",{textContent:W(A.value)},null,8,ge)])]),_:1},8,["modelValue"])])}}});const Fe=X(_e,[["__scopeId","data-v-0daf99dd"]]);export{Fe as default};
