import{d as V,a as E,cp as $,r as J,E as O,b as P,o as c,c as S,e as f,f as t,w as l,u as p,g as d,s as x,h as G,j as m,a8 as A,i as v,cq as H,cr as K,l as Q,a7 as W,_ as X}from"./index.c3ad3d27.js";import{E as Y}from"./el-drawer.cae86a71.js";import"./el-overlay.56c8528a.js";import{E as Z,e as ee,a as te,b as ae,c as oe}from"./push.334eab61.js";import{s as w,E as ne,a as b}from"./request.c1d6e5fb.js";import{E as le}from"./index.51b18375.js";const se=s=>w({url:"/report/listByTestCase",method:"get",params:s}),re=async s=>{try{const u=await w({url:"/report/download/"+s,method:"get",responseType:"blob"}),g=window.URL.createObjectURL(new Blob([u.data])),a=document.createElement("a");return a.href=g,a.setAttribute("download",s+"_data.zip"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(g),{success:!0}}catch(u){return console.error("Error downloading file:",u),{success:!1,error:u}}},ue=s=>w({url:"/report/getJMeterLog/"+s,method:"get"}),de=s=>w({url:"/report/clean/"+s,method:"get"}),ce=s=>w({url:"/report/view/"+s,method:"get"}),ie={class:"container"},pe={class:"handle-box"},me={class:"pagination"},ge=["textContent"],_e=V({name:"baseJmx"}),fe=V({..._e,setup(s){const u=E(!1),g=$(),a=J({name:g.query.name||null,testCaseId:g.query.testCaseId||null,page:1,size:10}),F=E([]),B=E(0),_=()=>{se(a).then(o=>{if(oe(o.data.message),o.data.code!=0)return b.error(o.data.message),!1;F.value=o.data.data.list,B.value=o.data.data.total||10})};_();const T=()=>{a.page=1,_()},I=()=>{a.name=null,a.testCaseId=null,_()},L=o=>{a.page=o,_()},R=async o=>{await le.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await de(o);e.data.code!=0?b.error(e.data.message):(b.success("\u5220\u9664\u6210\u529F"),await _())},U=async o=>{(await re(o)).success||b.error("\u4E0B\u8F7D\u5931\u8D25, \u8BF7\u91CD\u8BD5")},z=async o=>{const e=await ce(o);e.data.code!=0?b.error(e.data.message):window.open(e.data.data,"_blank")},k=E(""),j=async o=>{const e=await ue(o);console.log("res: ",e),k.value=e.data};return(o,e)=>{const C=ne,i=O,r=Z,h=ee,q=te,M=ae,N=Y,y=P("permiss");return c(),S("div",null,[f("div",ie,[f("div",pe,[t(C,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.name=n),placeholder:"\u62A5\u544A\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),t(C,{modelValue:a.testCaseId,"onUpdate:modelValue":e[1]||(e[1]=n=>a.testCaseId=n),placeholder:"\u7528\u4F8BID",class:"handle-input mr10"},null,8,["modelValue"]),t(i,{type:"primary",icon:p(x),onClick:T},{default:l(()=>e[3]||(e[3]=[d("\u641C\u7D22")])),_:1},8,["icon"]),t(i,{type:"primary",icon:p(G),onClick:I},{default:l(()=>e[4]||(e[4]=[d("\u91CD\u7F6E")])),_:1},8,["icon"])]),t(q,{data:F.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:l(()=>[t(r,{prop:"id",label:"ID",width:"55",align:"center"}),t(r,{prop:"name",label:"\u62A5\u544A\u540D\u79F0",align:"center"}),t(r,{prop:"description",label:"\u62A5\u544A\u63CF\u8FF0",align:"center"}),t(r,{prop:"testCaseId",label:"\u7528\u4F8BID",align:"center"}),t(r,{prop:"execType",label:"\u6267\u884C\u7C7B\u578B",align:"center"},{default:l(n=>[n.row.execType===1?(c(),m(h,{key:0,type:"success"},{default:l(()=>e[5]||(e[5]=[d("\u8C03\u8BD5")])),_:1})):A("",!0),n.row.execType===2?(c(),m(h,{key:1,type:"danger"},{default:l(()=>e[6]||(e[6]=[d("\u538B\u6D4B")])),_:1})):A("",!0)]),_:1}),t(r,{prop:"responseData",label:"\u6267\u884C\u7ED3\u679C",align:"center"}),t(r,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),t(r,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),t(r,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),t(r,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),t(r,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:l(n=>[v((c(),m(i,{style:{"margin-left":"0"},text:"",icon:p(x),class:"bg-blue",onClick:D=>(u.value=!0,j(n.row.id))},{default:l(()=>e[7]||(e[7]=[d(" \u67E5\u770B\u65E5\u5FD7 ")])),_:2},1032,["icon","onClick"])),[[y,1]]),v((c(),m(i,{style:{"margin-left":"0"},text:"",icon:p(H),class:"bg-blue",onClick:D=>U(n.row.id)},{default:l(()=>e[8]||(e[8]=[d(" \u62A5\u544A\u4E0B\u8F7D ")])),_:2},1032,["icon","onClick"])),[[y,1]]),v((c(),m(i,{style:{"margin-left":"0"},text:"",icon:p(K),class:"bg-blue",onClick:D=>z(n.row.id)},{default:l(()=>e[9]||(e[9]=[d(" \u62A5\u544A\u9884\u89C8 ")])),_:2},1032,["icon","onClick"])),[[y,1]]),v((c(),m(i,{style:{"margin-left":"0"},text:"",icon:p(Q),class:"red",onClick:D=>R(n.row.id)},{default:l(()=>e[10]||(e[10]=[d(" \u5220\u9664\u62A5\u544A ")])),_:2},1032,["icon","onClick"])),[[y,1]])]),_:1})]),_:1},8,["data"]),f("div",me,[t(M,{background:"",layout:"total, prev, pager, next","current-page":a.page,"page-size":a.size,total:B.value,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),t(N,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=n=>u.value=n),title:"jmeter.log\u65E5\u5FD7","show-close":!0,"with-header":!0,size:"60%"},{default:l(()=>[f("pre",null,[f("div",{textContent:W(k.value)},null,8,ge)])]),_:1},8,["modelValue"])])}}});const De=X(fe,[["__scopeId","data-v-8bc6efbc"]]);export{De as default};
