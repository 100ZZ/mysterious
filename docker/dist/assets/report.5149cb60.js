import{d as V,a as y,ce as q,r as J,E as O,b as P,o as d,c as S,e as f,f as t,w as l,u as p,g as c,s as x,h as G,j as m,a7 as A,i as E,cf as H,cg as K,l as Q,a6 as W,_ as X}from"./index.7d19d52a.js";import{E as Y}from"./el-drawer.8418db40.js";import"./el-overlay.d904f775.js";import{E as Z,f as ee,a as te,b as ae,c as oe}from"./push.8fd3fd7d.js";import{s as w,E as ne,a as b}from"./request.d7d01389.js";import{E as le}from"./index.9aec7bf6.js";const se=s=>w({url:"/report/listByTestCase",method:"get",params:s}),re=async s=>{try{const u=await w({url:"/report/download/"+s,method:"get",responseType:"blob"}),_=window.URL.createObjectURL(new Blob([u.data])),a=document.createElement("a");return a.href=_,a.setAttribute("download",s+"_data.zip"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(_),{success:!0}}catch(u){return console.error("Error downloading file:",u),{success:!1,error:u}}},ue=s=>w({url:"/report/getJMeterLog/"+s,method:"get"}),ce=s=>w({url:"/report/clean/"+s,method:"get"}),de=s=>w({url:"/report/view/"+s,method:"get"}),ie={class:"container"},pe={class:"handle-box"},me={class:"pagination"},_e=["textContent"],ge=V({name:"baseJmx"}),fe=V({...ge,setup(s){const u=y(!1),_=q(),a=J({name:_.query.name||null,testCaseId:_.query.testCaseId||null,page:1,size:10}),D=y([]),F=y(0),g=()=>{se(a).then(o=>{if(oe(o.data.message),o.data.code!=0)return b.error(o.data.message),!1;D.value=o.data.data.list,F.value=o.data.data.total||10})};g();const T=()=>{a.page=1,g()},I=()=>{a.name=null,a.testCaseId=null,g()},L=o=>{a.page=o,g()},R=async o=>{await le.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await ce(o);e.data.code!=0?b.error(e.data.message):(b.success("\u5220\u9664\u6210\u529F"),await g())},U=async o=>{(await re(o)).success||b.error("\u4E0B\u8F7D\u5931\u8D25, \u8BF7\u91CD\u8BD5")},z=async o=>{const e=await de(o);e.data.code!=0?b.error(e.data.message):window.open(e.data.data,"_blank")},B=y(""),j=async o=>{const e=await ue(o);console.log("res: ",e),B.value=e.data};return(o,e)=>{const C=ne,i=O,r=Z,k=ee,M=te,N=ae,$=Y,h=P("permiss");return d(),S("div",null,[f("div",ie,[f("div",pe,[t(C,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.name=n),placeholder:"\u62A5\u544A\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),t(C,{modelValue:a.testCaseId,"onUpdate:modelValue":e[1]||(e[1]=n=>a.testCaseId=n),placeholder:"\u7528\u4F8BID",class:"handle-input mr10"},null,8,["modelValue"]),t(i,{type:"primary",icon:p(x),onClick:T},{default:l(()=>[c("\u641C\u7D22")]),_:1},8,["icon"]),t(i,{type:"primary",icon:p(G),onClick:I},{default:l(()=>[c("\u91CD\u7F6E")]),_:1},8,["icon"])]),t(M,{data:D.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:l(()=>[t(r,{prop:"id",label:"ID",width:"55",align:"center"}),t(r,{prop:"name",label:"\u62A5\u544A\u540D\u79F0",align:"center"}),t(r,{prop:"description",label:"\u62A5\u544A\u63CF\u8FF0",align:"center"}),t(r,{prop:"testCaseId",label:"\u7528\u4F8BID",align:"center"}),t(r,{prop:"execType",label:"\u6267\u884C\u7C7B\u578B",align:"center"},{default:l(n=>[n.row.execType===1?(d(),m(k,{key:0,type:"success"},{default:l(()=>[c("\u8C03\u8BD5")]),_:1})):A("",!0),n.row.execType===2?(d(),m(k,{key:1,type:"danger"},{default:l(()=>[c("\u538B\u6D4B")]),_:1})):A("",!0)]),_:1}),t(r,{prop:"responseData",label:"\u6267\u884C\u7ED3\u679C",align:"center"}),t(r,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),t(r,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),t(r,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),t(r,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),t(r,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:l(n=>[E((d(),m(i,{style:{"margin-left":"0"},text:"",icon:p(x),class:"bg-blue",onClick:v=>(u.value=!0,j(n.row.id))},{default:l(()=>[c(" \u67E5\u770B\u65E5\u5FD7 ")]),_:2},1032,["icon","onClick"])),[[h,1]]),E((d(),m(i,{style:{"margin-left":"0"},text:"",icon:p(H),class:"bg-blue",onClick:v=>U(n.row.id)},{default:l(()=>[c(" \u62A5\u544A\u4E0B\u8F7D ")]),_:2},1032,["icon","onClick"])),[[h,1]]),E((d(),m(i,{style:{"margin-left":"0"},text:"",icon:p(K),class:"bg-blue",onClick:v=>z(n.row.id)},{default:l(()=>[c(" \u62A5\u544A\u9884\u89C8 ")]),_:2},1032,["icon","onClick"])),[[h,1]]),E((d(),m(i,{style:{"margin-left":"0"},text:"",icon:p(Q),class:"red",onClick:v=>R(n.row.id)},{default:l(()=>[c(" \u5220\u9664\u62A5\u544A ")]),_:2},1032,["icon","onClick"])),[[h,1]])]),_:1})]),_:1},8,["data"]),f("div",me,[t(N,{background:"",layout:"total, prev, pager, next","current-page":a.page,"page-size":a.size,total:F.value,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),t($,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=n=>u.value=n),title:"jmeter.log\u65E5\u5FD7","show-close":!0,"with-header":!0,size:"60%"},{default:l(()=>[f("pre",null,[f("div",{textContent:W(B.value)},null,8,_e)])]),_:1},8,["modelValue"])])}}});const ve=X(fe,[["__scopeId","data-v-8bc6efbc"]]);export{ve as default};
