import{d as O,r as N,a as k,E as ne,cn as se,co as de,cp as re,b as ie,o as b,c as pe,e as C,f as l,w as u,u as o,g as i,s as me,h as q,p as ce,j as B,a8 as M,i as A,cq as fe,k as Fe,l as ge,_ as be}from"./index.31d4ff11.js";import{E as Be,a as _e,b as Ee}from"./el-form-item.c71a4778.js";import"./el-overlay.d7f74ee2.js";import{E as Ve,e as Ce,a as ye,b as we,g as ve,h as De,c as ke}from"./push.d962738d.js";import{E as Ae,a as Ue}from"./el-col.1ec4b9c3.js";import{s as _,E as xe,a as p}from"./request.70bea45c.js";import{h as Te}from"./testcase.cf5d96ae.js";import{E as I}from"./index.fed87060.js";const Ne=r=>_({url:"/node/add",method:"post",data:r}),Me=(r,U)=>_({url:"/node/update/"+r,method:"post",data:U}),Ie=r=>_({url:"/node/list",method:"get",params:r}),$e=r=>_({url:"/node/delete/"+r,method:"get"}),Se=r=>_({url:"/node/enable/"+r,method:"get"}),he=r=>_({url:"/node/disable/"+r,method:"get"}),R=r=>{switch(r){case 0:return"Slave";case 1:return"Master";default:return r}},ze=r=>{switch(r){case"Slave":return 0;case"Master":return 1;default:return r}},Pe={class:"container"},je={class:"handle-box"},Le={class:"pagination"},qe={class:"dialog-footer"},Re={class:"dialog-footer"},Oe=O({name:"baseNode"}),Ge=O({...Oe,setup(r){const U=t=>R(t.type),F=N({name:null,host:null,page:1,size:10}),$=k([]),S=k(0),g=()=>{Ie(F).then(t=>{if(ke(t.data.message),t.data.code!=0)return p.error(t.data.message),!1;$.value=t.data.data.list,S.value=t.data.data.total||10})};g();const G=()=>{F.page=1,g()},H=()=>{F.name=null,F.host=null,g()},J=t=>{F.page=t,g()},E=k(!1);let d=N({name:null,description:null,type:null,host:null,port:null,username:null,password:null});const K=t=>{d.name=t.name,d.description=t.description,d.type=t.nodeType,d.host=t.host,d.port=t.port,d.username=t.username,d.password=t.password,E.value=!0},Q=async()=>{const t=await Ne(d);t.data.code!==0?p.error(t.data.message):(p.success("\u65B0\u589E\u6210\u529F"),E.value=!1,await g())},W=async t=>{await I.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await $e(t);e.data.code!=0?p.error(e.data.message):(p.success("\u5220\u9664\u6210\u529F"),await g())},V=k(!1);let n=N({id:null,name:null,description:null,type:null,host:null,port:null,username:null});const X=t=>{n.id=t.id,n.name=t.name,n.description=t.description,n.type=R(t.type),n.host=t.host,n.port=t.port,n.username=t.username,V.value=!0},Y=async()=>{n.type=ze(n.type);const t=await Me(n.id,n);t.data.code!=0?p.error(t.data.message):(p.success("\u7F16\u8F91\u6210\u529F"),V.value=!1,await g())},Z=async t=>{await I.confirm("\u786E\u5B9A\u8981\u542F\u7528\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=p.warning("\u542F\u7528\u8FDB\u884C\u4E2D\uFF0C\u8BF7\u7A0D\u7B49\u7247\u523B......");await x(1e3),e.close();const s=await Se(t);s.data.code!=0?p.error(s.data.message):(p.success("\u542F\u7528\u6210\u529F"),await g())},ee=async t=>{const e=p.warning("\u7981\u7528\u8FDB\u884C\u4E2D\uFF0C\u8BF7\u7A0D\u7B49\u7247\u523B......");await x(1e3),e.close();const s=await he(t);s.data.code!=0?p.error(s.data.message):(p.success("\u7981\u7528\u6210\u529F"),await g())},le=async t=>{await I.confirm("\u786E\u5B9A\u8981\u540C\u6B65\u6570\u636E\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=p.warning("\u5F00\u59CB\u540C\u6B65\u6570\u636E\uFF0C\u8BF7\u7A0D\u7B49\u7247\u523B......");await x(1e3),e.close();const s=await Te(t);s.data.code!=0?p.error(s.data.message):(p.success("\u540C\u6B65\u6210\u529F"),await g())};function x(t){return new Promise(e=>setTimeout(e,t))}return(t,e)=>{const s=xe,m=ne,c=Ve,T=Ce,h=se,ue=de,ae=re,y=Ae,z=Ue,te=ye,oe=we,f=Be,w=ve,P=De,j=_e,L=Ee,v=ie("permiss");return b(),pe("div",null,[C("div",Pe,[C("div",je,[l(s,{modelValue:F.name,"onUpdate:modelValue":e[0]||(e[0]=a=>F.name=a),placeholder:"\u8282\u70B9\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),l(s,{modelValue:F.host,"onUpdate:modelValue":e[1]||(e[1]=a=>F.host=a),placeholder:"\u8282\u70B9\u5730\u5740",class:"handle-input mr10"},null,8,["modelValue"]),l(m,{type:"primary",icon:o(me),onClick:G},{default:u(()=>e[20]||(e[20]=[i("\u641C\u7D22")])),_:1},8,["icon"]),l(m,{type:"primary",icon:o(q),onClick:H},{default:u(()=>e[21]||(e[21]=[i("\u91CD\u7F6E")])),_:1},8,["icon"]),l(m,{type:"primary",icon:o(ce),onClick:K},{default:u(()=>e[22]||(e[22]=[i("\u65B0\u589E")])),_:1},8,["icon"])]),l(te,{data:$.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:u(()=>[l(c,{prop:"id",label:"\u7F16\u53F7",width:"55",align:"center"}),l(c,{prop:"name",label:"\u540D\u79F0",align:"center"}),l(c,{prop:"description",label:"\u63CF\u8FF0",align:"center"}),l(c,{prop:"type",label:"\u7C7B\u578B",formatter:U,align:"center"}),l(c,{prop:"host",label:"\u5730\u5740",align:"center"}),l(c,{prop:"port",label:"\u7AEF\u53E3",align:"center"}),l(c,{prop:"username",label:"\u7528\u6237",align:"center"}),l(c,{prop:"password",label:"\u5BC6\u7801",align:"center"}),l(c,{prop:"status",label:"\u72B6\u6001",align:"center"},{default:u(a=>[a.row.status===0?(b(),B(T,{key:0,class:"disabled"},{default:u(()=>e[23]||(e[23]=[i("\u7981\u7528\u4E2D")])),_:1})):M("",!0),a.row.status===1?(b(),B(T,{key:1,class:"enabled"},{default:u(()=>e[24]||(e[24]=[i("\u542F\u7528\u4E2D")])),_:1})):M("",!0),a.row.status===2?(b(),B(T,{key:2,class:"failed"},{default:u(()=>e[25]||(e[25]=[i("\u542F\u52A8\u5931\u8D25")])),_:1})):M("",!0)]),_:1}),l(c,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),l(c,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),l(c,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),l(c,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),l(c,{label:"\u64CD\u4F5C",width:"200",align:"center"},{default:u(a=>[l(z,{type:"flex",justify:"center"},{default:u(()=>[l(y,{span:12},{default:u(()=>[l(ae,{class:"group-status",trigger:"click"},{dropdown:u(()=>[l(ue,{class:"horizontal-dropdown-menu"},{default:u(()=>[l(h,{style:{backgroundColor:"#D1E7DD",color:"#4CAF50"},onClick:D=>Z(a.row.id)},{default:u(()=>e[27]||(e[27]=[i("\u542F\u7528")])),_:2},1032,["onClick"]),l(h,{style:{backgroundColor:"#FFCDD2",color:"#EF5350"},onClick:D=>ee(a.row.id)},{default:u(()=>e[28]||(e[28]=[i("\u7981\u7528")])),_:2},1032,["onClick"])]),_:2},1024)]),default:u(()=>[A((b(),B(m,{text:"",icon:o(fe),class:"bg-blue"},{default:u(()=>e[26]||(e[26]=[i("\u64CD\u4F5C")])),_:1},8,["icon"])),[[v,1]])]),_:2},1024)]),_:2},1024),l(y,{span:12},{default:u(()=>[A((b(),B(m,{text:"",icon:o(q),class:"bg-blue",onClick:D=>le(a.row.id)},{default:u(()=>e[29]||(e[29]=[i(" \u540C\u6B65 ")])),_:2},1032,["icon","onClick"])),[[v,1]])]),_:2},1024)]),_:2},1024),l(z,{type:"flex",justify:"center"},{default:u(()=>[l(y,{span:12},{default:u(()=>[A((b(),B(m,{text:"",icon:o(Fe),class:"bg-blue",onClick:D=>X(a.row)},{default:u(()=>e[30]||(e[30]=[i(" \u7F16\u8F91 ")])),_:2},1032,["icon","onClick"])),[[v,1]])]),_:2},1024),l(y,{span:12},{default:u(()=>[A((b(),B(m,{text:"",icon:o(ge),class:"red",onClick:D=>W(a.row.id)},{default:u(()=>e[31]||(e[31]=[i(" \u5220\u9664 ")])),_:2},1032,["icon","onClick"])),[[v,1]])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"]),C("div",Le,[l(oe,{background:"",layout:"total, prev, pager, next","current-page":F.page,"page-size":F.size,total:S.value,onCurrentChange:J},null,8,["current-page","page-size","total"])])]),l(L,{title:"\u65B0\u589E",modelValue:E.value,"onUpdate:modelValue":e[10]||(e[10]=a=>E.value=a),width:"30%"},{footer:u(()=>[C("span",qe,[l(m,{onClick:e[9]||(e[9]=a=>E.value=!1)},{default:u(()=>e[32]||(e[32]=[i("\u53D6 \u6D88")])),_:1}),l(m,{type:"primary",onClick:Q},{default:u(()=>e[33]||(e[33]=[i("\u786E \u5B9A")])),_:1})])]),default:u(()=>[l(j,{"label-width":"70px"},{default:u(()=>[l(f,{label:"\u8282\u70B9\u540D\u79F0"},{default:u(()=>[l(s,{modelValue:o(d).name,"onUpdate:modelValue":e[2]||(e[2]=a=>o(d).name=a),placeholder:"\u8282\u70B9\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:u(()=>[l(s,{modelValue:o(d).description,"onUpdate:modelValue":e[3]||(e[3]=a=>o(d).description=a),placeholder:"\u8282\u70B9\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[l(P,{modelValue:o(d).type,"onUpdate:modelValue":e[4]||(e[4]=a=>o(d).type=a),placeholder:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[l(w,{key:"0",label:"Slave",value:"0"}),l(w,{key:"1",label:"Master",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u5730\u5740"},{default:u(()=>[l(s,{modelValue:o(d).host,"onUpdate:modelValue":e[5]||(e[5]=a=>o(d).host=a),placeholder:"\u8282\u70B9IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u7AEF\u53E3"},{default:u(()=>[l(s,{modelValue:o(d).port,"onUpdate:modelValue":e[6]||(e[6]=a=>o(d).port=a),placeholder:"ssh\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u7528\u6237"},{default:u(()=>[l(s,{modelValue:o(d).username,"onUpdate:modelValue":e[7]||(e[7]=a=>o(d).username=a),placeholder:"ssh\u7528\u6237"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u5BC6\u7801"},{default:u(()=>[l(s,{modelValue:o(d).password,"onUpdate:modelValue":e[8]||(e[8]=a=>o(d).password=a),placeholder:"\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(L,{title:"\u7F16\u8F91",modelValue:V.value,"onUpdate:modelValue":e[19]||(e[19]=a=>V.value=a),width:"30%"},{footer:u(()=>[C("span",Re,[l(m,{onClick:e[18]||(e[18]=a=>V.value=!1)},{default:u(()=>e[34]||(e[34]=[i("\u53D6 \u6D88")])),_:1}),l(m,{type:"primary",onClick:Y},{default:u(()=>e[35]||(e[35]=[i("\u786E \u5B9A")])),_:1})])]),default:u(()=>[l(j,{"label-width":"70px"},{default:u(()=>[l(f,{label:"\u7F16\u53F7"},{default:u(()=>[l(s,{modelValue:o(n).id,"onUpdate:modelValue":e[11]||(e[11]=a=>o(n).id=a),disabled:""},null,8,["modelValue"])]),_:1}),l(f,{label:"\u8282\u70B9\u540D\u79F0"},{default:u(()=>[l(s,{modelValue:o(n).name,"onUpdate:modelValue":e[12]||(e[12]=a=>o(n).name=a)},null,8,["modelValue"])]),_:1}),l(f,{label:"\u8282\u70B9\u63CF\u8FF0"},{default:u(()=>[l(s,{modelValue:o(n).description,"onUpdate:modelValue":e[13]||(e[13]=a=>o(n).description=a)},null,8,["modelValue"])]),_:1}),l(f,{label:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[l(P,{modelValue:o(n).type,"onUpdate:modelValue":e[14]||(e[14]=a=>o(n).type=a),placeholder:"\u8282\u70B9\u7C7B\u578B"},{default:u(()=>[l(w,{key:"0",label:"Slave",value:"0"}),l(w,{key:"1",label:"Master",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u5730\u5740"},{default:u(()=>[l(s,{modelValue:o(n).host,"onUpdate:modelValue":e[15]||(e[15]=a=>o(n).host=a),placeholder:"\u8282\u70B9IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u7AEF\u53E3"},{default:u(()=>[l(s,{modelValue:o(n).port,"onUpdate:modelValue":e[16]||(e[16]=a=>o(n).port=a),placeholder:"ssh\u7AEF\u53E3"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u767B\u5F55\u7528\u6237"},{default:u(()=>[l(s,{modelValue:o(n).username,"onUpdate:modelValue":e[17]||(e[17]=a=>o(n).username=a),placeholder:"ssh\u7528\u6237"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const el=be(Ge,[["__scopeId","data-v-a91b5464"]]);export{el as default};
