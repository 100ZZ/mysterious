import{d as A,a as h,r as J,E as O,ba as P,b as S,o as i,c as q,e as v,f as e,w as l,u as m,g as c,s as x,h as G,j as _,a7 as k,i as E,c9 as H,ca as K,l as Q,a6 as W,_ as X}from"./index.5e60250a.js";import{E as Y}from"./el-drawer.d19eaad9.js";import"./el-overlay.665e6a00.js";import{E as Z,e as ee,a as te,b as ae,c as oe,d as ne}from"./push.b5c18fc3.js";import{s as b,E as le,a as f}from"./request.1a4c1a35.js";const se=s=>b({url:"/report/listByTestCase",method:"get",params:s}),re=async s=>{try{const u=await b({url:"/report/download/"+s,method:"get",responseType:"blob"}),o=window.URL.createObjectURL(new Blob([u.data])),d=document.createElement("a");return d.href=o,d.setAttribute("download",s+"_data.zip"),document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(o),{success:!0}}catch(u){return console.error("Error downloading file:",u),{success:!1,error:u}}},ue=s=>b({url:"/report/getJMeterLog/"+s,method:"get"}),ce=s=>b({url:"/report/clean/"+s,method:"get"}),de=s=>b({url:"/report/view/"+s,method:"get"}),ie={class:"container"},pe={class:"handle-box"},me={class:"pagination"},_e=["textContent"],ge=A({name:"baseJmx"}),fe=A({...ge,setup(s){const u=h(!1),o=J({name:null,testCaseId:null,page:1,size:10}),d=h([]),D=h(0),g=()=>{se(o).then(a=>{if(oe(a.data.message),a.data.code!=0)return f.error(a.data.message),!1;d.value=a.data.data.list,D.value=a.data.data.total||10})};g();const V=()=>{o.page=1,g()},T=()=>{o.name=null,o.testCaseId=null,g()},L=a=>{o.page=a,g()},I=async a=>{await ne.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const t=await ce(a);t.data.code!=0?f.error(t.data.message):(f.success("\u5220\u9664\u6210\u529F"),await g())},R=async a=>{(await re(a)).success||f.error("\u4E0B\u8F7D\u5931\u8D25, \u8BF7\u91CD\u8BD5")},U=async a=>{const t=await de(a);t.data.code!=0?f.error(t.data.message):window.open(t.data.data,"_blank")},F=h(""),z=async a=>{const t=await ue(a);console.log("res: ",t),F.value=t.data};return(a,t)=>{const w=le,p=O,r=Z,B=ee,j=te,M=ae,N=P("xmp"),$=Y,C=S("permiss");return i(),q("div",null,[v("div",ie,[v("div",pe,[e(w,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=n=>o.name=n),placeholder:"\u62A5\u544A\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),e(w,{modelValue:o.testCaseId,"onUpdate:modelValue":t[1]||(t[1]=n=>o.testCaseId=n),placeholder:"\u7528\u4F8BID",class:"handle-input mr10"},null,8,["modelValue"]),e(p,{type:"primary",icon:m(x),onClick:V},{default:l(()=>[c("\u641C\u7D22")]),_:1},8,["icon"]),e(p,{type:"primary",icon:m(G),onClick:T},{default:l(()=>[c("\u91CD\u7F6E")]),_:1},8,["icon"])]),e(j,{data:d.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:l(()=>[e(r,{prop:"id",label:"ID",width:"55",align:"center"}),e(r,{prop:"name",label:"\u62A5\u544A\u540D\u79F0",align:"center"}),e(r,{prop:"description",label:"\u62A5\u544A\u63CF\u8FF0",align:"center"}),e(r,{prop:"testCaseId",label:"\u7528\u4F8BID",align:"center"}),e(r,{prop:"execType",label:"\u6267\u884C\u7C7B\u578B",align:"center"},{default:l(n=>[n.row.execType===1?(i(),_(B,{key:0,type:"success"},{default:l(()=>[c("\u8C03\u8BD5")]),_:1})):k("",!0),n.row.execType===2?(i(),_(B,{key:1,type:"danger"},{default:l(()=>[c("\u538B\u6D4B")]),_:1})):k("",!0)]),_:1}),e(r,{prop:"responseData",label:"\u6267\u884C\u7ED3\u679C",align:"center"}),e(r,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),e(r,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),e(r,{prop:"modifier",label:"\u4FEE\u6539\u4EBA",align:"center"}),e(r,{prop:"modifyTime",label:"\u4FEE\u6539\u65F6\u95F4",align:"center"}),e(r,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:l(n=>[E((i(),_(p,{style:{"margin-left":"0"},text:"",icon:m(x),class:"bg-blue",onClick:y=>(u.value=!0,z(n.row.id))},{default:l(()=>[c(" \u67E5\u770B\u65E5\u5FD7 ")]),_:2},1032,["icon","onClick"])),[[C,1]]),E((i(),_(p,{style:{"margin-left":"0"},text:"",icon:m(H),class:"bg-blue",onClick:y=>R(n.row.id)},{default:l(()=>[c(" \u62A5\u544A\u4E0B\u8F7D ")]),_:2},1032,["icon","onClick"])),[[C,1]]),E((i(),_(p,{style:{"margin-left":"0"},text:"",icon:m(K),class:"bg-blue",onClick:y=>U(n.row.id)},{default:l(()=>[c(" \u62A5\u544A\u9884\u89C8 ")]),_:2},1032,["icon","onClick"])),[[C,1]]),E((i(),_(p,{style:{"margin-left":"0"},text:"",icon:m(Q),class:"red",onClick:y=>I(n.row.id)},{default:l(()=>[c(" \u5220\u9664\u62A5\u544A ")]),_:2},1032,["icon","onClick"])),[[C,1]])]),_:1})]),_:1},8,["data"]),v("div",me,[e(M,{background:"",layout:"total, prev, pager, next","current-page":o.page,"page-size":o.size,total:D.value,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),e($,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=n=>u.value=n),title:"jmeter.log\u65E5\u5FD7","show-close":!0,"with-header":!0,size:"60%"},{default:l(()=>[e(N,null,{default:l(()=>[v("div",{textContent:W(F.value)},null,8,_e)]),_:1})]),_:1},8,["modelValue"])])}}});const Ee=X(fe,[["__scopeId","data-v-e789acef"]]);export{Ee as default};
