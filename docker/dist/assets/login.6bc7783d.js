import{d as k,ct as N,r as E,cu as x,a as I,cv as S,o as U,c as A,e as m,f as u,w as s,u as a,cw as B,bj as V,cx as w,g as c,E as K,_ as L}from"./index.02073e48.js";import{E as T,a as q,b as R}from"./el-form-item.d0eabf7e.js";import"./el-overlay.98bf5bc3.js";import{a as _,E as $}from"./request.e8da4d31.js";import{l as j,a as J}from"./user.920cd2fb.js";const M={class:"login-wrap"},O={class:"ms-login"},P={class:"login-btn"},z={class:"login-btn"},G={class:"dialog-footer"},H=k({__name:"login",setup(Q){const v=N(),r=E({username:null,password:null}),g={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},F=x(),f=()=>{j(r).then(t=>{if(t.data.code!=0)return _.error(t.data.message),!1;const n=t.data.data;localStorage.setItem("token",n),_.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("ms_username",r.username);const d=F.defaultList[r.username=="admin"?"admin":"demo"];F.handleSet(d),localStorage.setItem("ms_keys",JSON.stringify(d)),v.push("/")})},p=I(!1);let l=E({username:null,password:null,realName:null});const y=t=>{l.username=t.username,l.password=t.password,l.realName=t.realName,p.value=!0},D=async()=>{const t=await J(l);t.data.code!==0?_.error(t.data.message):(_.success("\u6CE8\u518C\u6210\u529F"),p.value=!1)};return S().clearTags(),(t,e)=>{const n=K,d=$,i=T,C=q,b=R;return U(),A("div",M,[m("div",O,[e[13]||(e[13]=m("div",{class:"ms-title"},"\u5206\u5E03\u5F0F\u538B\u6D4B\u5E73\u53F0",-1)),u(C,{model:r,rules:g,ref:"userLogin","label-width":"0px",class:"ms-content"},{default:s(()=>[u(i,{prop:"username"},{default:s(()=>[u(d,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prepend:s(()=>[u(n,{icon:a(B)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),u(i,{prop:"password"},{default:s(()=>[u(d,{type:"password",placeholder:"\u8BF7\u4E0D\u8981\u7528\u79C1\u4EBA\u5BC6\u7801",modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=o=>r.password=o),onKeyup:V(f,["enter"])},{prepend:s(()=>[u(n,{icon:a(w)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),m("div",P,[u(n,{type:"primary",onClick:f},{default:s(()=>e[7]||(e[7]=[c("\u767B\u5F55")])),_:1})]),m("div",z,[u(n,{type:"primary",onClick:y},{default:s(()=>e[8]||(e[8]=[c("\u6CE8\u518C")])),_:1})]),e[9]||(e[9]=m("p",{class:"login-tips"},"\u65E0\u6CD5\u89E3\u5BC6\uFF0C\u8BF7\u7262\u8BB0\u4F60\u7684\u7528\u6237\u540D\u5BC6\u7801\u3002",-1))]),_:1},8,["model"]),u(b,{title:"\u65B0\u7528\u6237\u6CE8\u518C",modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value=o),width:"30%"},{footer:s(()=>[m("span",G,[u(n,{onClick:e[5]||(e[5]=o=>p.value=!1)},{default:s(()=>e[11]||(e[11]=[c("\u53D6 \u6D88")])),_:1}),u(n,{type:"primary",onClick:D},{default:s(()=>e[12]||(e[12]=[c("\u786E \u5B9A")])),_:1})])]),default:s(()=>[u(C,{model:a(l),rules:g,ref:"userRegister","label-width":"0px",class:"ms-content"},{default:s(()=>[u(i,{prop:"username"},{default:s(()=>[u(d,{modelValue:a(l).username,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).username=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prepend:s(()=>[u(n,{icon:a(B)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),u(i,{prop:"password"},{default:s(()=>[u(d,{type:"password",placeholder:"\u8BF7\u4E0D\u8981\u7528\u79C1\u4EBA\u5BC6\u7801\uFF0C\u65E0\u6CD5\u89E3\u5BC6\uFF0C\u5BC6\u7801\u8BF7\u7262\u8BB0",modelValue:a(l).password,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).password=o),onKeyup:V(f,["enter"])},{prepend:s(()=>[u(n,{icon:a(w)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),u(i,{prop:"readName"},{default:s(()=>[u(d,{modelValue:a(l).realName,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).realName=o),placeholder:"\u771F\u5B9E\u59D3\u540D"},{prepend:s(()=>[u(n,{icon:a(B)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),e[10]||(e[10]=m("p",{class:"login-tips"},"\u65E0\u6CD5\u89E3\u5BC6\uFF0C\u8BF7\u7262\u8BB0\u4F60\u7684\u7528\u6237\u540D\u5BC6\u7801\u3002",-1))]),_:1},8,["model"])]),_:1},8,["modelValue"])])])}}});const ue=L(H,[["__scopeId","data-v-2970d48b"]]);export{ue as default};
