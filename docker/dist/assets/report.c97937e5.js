import{d as h,a as B,co as $,r as J,E as O,b as P,o as r,c as S,e as C,f as a,w as o,u as g,g as s,s as V,h as G,j as i,a8 as f,i as F,cp as H,cq as K,l as Q,a7 as W,_ as X}from"./index.b600d1ed.js";import{E as Y}from"./el-drawer.24cf8def.js";import"./el-overlay.434afa62.js";import{E as Z,e as ee,a as te,b as ae,c as oe}from"./push.b6be573c.js";import{s as b,E as ne,a as y}from"./request.817e3c98.js";import{E as le}from"./index.6d4992f4.js";const se=u=>b({url:"/report/listByTestCase",method:"get",params:u}),ue=async u=>{try{const c=await b({url:"/report/download/"+u,method:"get",responseType:"blob"}),_=window.URL.createObjectURL(new Blob([c.data])),n=document.createElement("a");return n.href=_,n.setAttribute("download",u+"_data.zip"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(_),{success:!0}}catch(c){return console.error("Error downloading file:",c),{success:!1,error:c}}},re=u=>b({url:"/report/getJMeterLog/"+u,method:"get"}),de=u=>b({url:"/report/clean/"+u,method:"get"}),ie=u=>b({url:"/report/view/"+u,method:"get"}),ce={class:"container"},pe={class:"handle-box"},me={class:"pagination"},ge=["textContent"],fe=h({name:"baseJmx"}),_e=h({...fe,setup(u){const c=B(!1),_=$(),n=J({name:_.query.name||null,testCaseId:_.query.testCaseId||null,page:1,size:10}),D=B([]),x=B(0),w=()=>{se(n).then(l=>{if(oe(l.data.message),l.data.code!=0)return y.error(l.data.message),!1;D.value=l.data.data.list,x.value=l.data.data.total||10})};w();const T=()=>{n.page=1,w()},L=()=>{n.name=null,n.testCaseId=null,w()},R=l=>{n.page=l,w()},I=async l=>{await le.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await de(l);e.data.code!=0?y.error(e.data.message):(y.success("\u5220\u9664\u6210\u529F"),await w())},U=async l=>{(await ue(l)).success||y.error("\u4E0B\u8F7D\u5931\u8D25, \u8BF7\u91CD\u8BD5")},z=async l=>{const e=await ie(l);e.data.code!=0?y.error(e.data.message):window.open(e.data.data,"_blank")},A=B(""),j=async l=>{const e=await re(l);console.log("res: ",e),A.value=e.data};return(l,e)=>{const v=ne,p=O,d=Z,m=ee,q=te,M=ae,N=Y,E=P("permiss");return r(),S("div",null,[C("div",ce,[C("div",pe,[a(v,{modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=t=>n.name=t),placeholder:"\u62A5\u544A\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),a(v,{modelValue:n.testCaseId,"onUpdate:modelValue":e[1]||(e[1]=t=>n.testCaseId=t),placeholder:"\u7528\u4F8B",class:"handle-input mr10"},null,8,["modelValue"]),a(p,{type:"primary",icon:g(V),onClick:T},{default:o(()=>e[3]||(e[3]=[s("\u641C\u7D22")])),_:1},8,["icon"]),a(p,{type:"primary",icon:g(G),onClick:L},{default:o(()=>e[4]||(e[4]=[s("\u91CD\u7F6E")])),_:1},8,["icon"])]),a(q,{data:D.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o(()=>[a(d,{prop:"id",label:"\u7F16\u53F7",width:"55",align:"center"}),a(d,{prop:"name",label:"\u540D\u79F0",align:"center"}),a(d,{prop:"description",label:"\u63CF\u8FF0",align:"center"}),a(d,{prop:"testCaseId",label:"\u7528\u4F8B",align:"center"}),a(d,{prop:"execType",label:"\u7C7B\u578B",align:"center"},{default:o(t=>[t.row.execType===1?(r(),i(m,{key:0,type:"primary"},{default:o(()=>e[5]||(e[5]=[s("\u8C03\u8BD5")])),_:1})):f("",!0),t.row.execType===2?(r(),i(m,{key:1,type:"danger"},{default:o(()=>e[6]||(e[6]=[s("\u538B\u6D4B")])),_:1})):f("",!0)]),_:1}),a(d,{prop:"status",label:"\u72B6\u6001",align:"center"},{default:o(t=>[t.row.status===0?(r(),i(m,{key:0,type:"info"},{default:o(()=>e[7]||(e[7]=[s("\u6CA1\u6709\u6267\u884C")])),_:1})):f("",!0),t.row.status===1?(r(),i(m,{key:1,type:"warning"},{default:o(()=>e[8]||(e[8]=[s("\u6B63\u5728\u6267\u884C")])),_:1})):f("",!0),t.row.status===2?(r(),i(m,{key:2,type:"success"},{default:o(()=>e[9]||(e[9]=[s("\u6267\u884C\u6210\u529F")])),_:1})):f("",!0),t.row.status===3?(r(),i(m,{key:3,type:"danger"},{default:o(()=>e[10]||(e[10]=[s("\u6267\u884C\u5F02\u5E38")])),_:1})):f("",!0)]),_:1}),a(d,{prop:"responseData",label:"\u7ED3\u679C",align:"center"}),a(d,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),a(d,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),a(d,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:o(t=>[F((r(),i(p,{style:{"margin-left":"0"},text:"",icon:g(V),class:"bg-blue",onClick:k=>(c.value=!0,j(t.row.id))},{default:o(()=>e[11]||(e[11]=[s(" \u67E5\u770B\u65E5\u5FD7 ")])),_:2},1032,["icon","onClick"])),[[E,1]]),F((r(),i(p,{style:{"margin-left":"0"},text:"",icon:g(H),class:"bg-blue",onClick:k=>U(t.row.id)},{default:o(()=>e[12]||(e[12]=[s(" \u62A5\u544A\u4E0B\u8F7D ")])),_:2},1032,["icon","onClick"])),[[E,1]]),F((r(),i(p,{style:{"margin-left":"0"},text:"",icon:g(K),class:"bg-blue",onClick:k=>z(t.row.id)},{default:o(()=>e[13]||(e[13]=[s(" \u62A5\u544A\u9884\u89C8 ")])),_:2},1032,["icon","onClick"])),[[E,1]]),F((r(),i(p,{style:{"margin-left":"0"},text:"",icon:g(Q),class:"red",onClick:k=>I(t.row.id)},{default:o(()=>e[14]||(e[14]=[s(" \u5220\u9664\u62A5\u544A ")])),_:2},1032,["icon","onClick"])),[[E,1]])]),_:1})]),_:1},8,["data"]),C("div",me,[a(M,{background:"",layout:"total, prev, pager, next","current-page":n.page,"page-size":n.size,total:x.value,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),a(N,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),title:"jmeter.log\u65E5\u5FD7","show-close":!0,"with-header":!0,size:"60%"},{default:o(()=>[C("pre",null,[C("div",{textContent:W(A.value)},null,8,ge)])]),_:1},8,["modelValue"])])}}});const Be=X(_e,[["__scopeId","data-v-75ace6bc"]]);export{Be as default};
