import{d as T,a as B,ck as J,r as O,E as P,b as S,o as u,c as G,e as f,f as o,w as a,u as p,g as s,s as h,h as H,a7 as V,j as i,a8 as _,i as F,cq as K,cr as Q,l as W,_ as X}from"./index.e83529d4.js";import{E as Y}from"./el-drawer.62edb61d.js";import"./el-overlay.02e632ca.js";import{E as Z,e as ee,a as te,b as ae,c as oe,j as le}from"./push.f24fb052.js";import{s as b,E as ne,a as y}from"./request.d3b43c42.js";import{E as se}from"./index.6313ba76.js";const re=r=>b({url:"/report/listByTestCase",method:"get",params:r}),ue=async r=>{try{const c=await b({url:"/report/download/"+r,method:"get",responseType:"blob"}),C=window.URL.createObjectURL(new Blob([c.data])),l=document.createElement("a");return l.href=C,l.setAttribute("download",r+"_data.zip"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(C),{success:!0}}catch(c){return console.error("Error downloading file:",c),{success:!1,error:c}}},de=r=>b({url:"/report/getJMeterLog/"+r,method:"get"}),ie=r=>b({url:"/report/clean/"+r,method:"get"}),ce=r=>b({url:"/report/view/"+r,method:"get"}),pe={class:"container"},me={class:"handle-box"},ge=["onClick"],fe={class:"pagination"},_e=["textContent"],Ce=T({name:"baseJmx"}),we=T({...Ce,setup(r){const c=B(!1),C=J(),l=O({name:C.query.name||null,testCaseId:C.query.testCaseId||null,page:1,size:10}),D=B([]),x=B(0),w=()=>{re(l).then(n=>{if(oe(n.data.message),n.data.code!=0)return y.error(n.data.message),!1;D.value=n.data.data.list,x.value=n.data.data.total||10})};w();const L=()=>{l.page=1,w()},R=()=>{l.name=null,l.testCaseId=null,w()},I=n=>{l.page=n,w()},U=async n=>{await se.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"});const e=await ie(n);e.data.code!=0?y.error(e.data.message):(y.success("\u5220\u9664\u6210\u529F"),await w())},j=async n=>{(await ue(n)).success||y.error("\u4E0B\u8F7D\u5931\u8D25, \u8BF7\u91CD\u8BD5")},z=async n=>{const e=await ce(n);e.data.code!=0?y.error(e.data.message):window.open(e.data.data,"_blank")},A=B(""),$=async n=>{const e=await de(n);console.log("res: ",e),A.value=e.data};return(n,e)=>{const v=ne,m=P,d=Z,g=ee,q=te,M=ae,N=Y,k=S("permiss");return u(),G("div",null,[f("div",pe,[f("div",me,[o(v,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.name=t),placeholder:"\u62A5\u544A\u540D\u79F0",class:"handle-input mr10"},null,8,["modelValue"]),o(v,{modelValue:l.testCaseId,"onUpdate:modelValue":e[1]||(e[1]=t=>l.testCaseId=t),placeholder:"\u7528\u4F8B",class:"handle-input mr10"},null,8,["modelValue"]),o(m,{type:"primary",icon:p(h),onClick:L},{default:a(()=>e[3]||(e[3]=[s("\u641C\u7D22")])),_:1},8,["icon"]),o(m,{type:"primary",icon:p(H),onClick:R},{default:a(()=>e[4]||(e[4]=[s("\u91CD\u7F6E")])),_:1},8,["icon"])]),o(q,{data:D.value,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:a(()=>[o(d,{prop:"id",label:"\u7F16\u53F7",width:"55",align:"center"}),o(d,{prop:"name",label:"\u540D\u79F0",align:"center"}),o(d,{prop:"description",label:"\u63CF\u8FF0",align:"center"}),o(d,{prop:"testCaseId",label:"\u7528\u4F8B",align:"center"},{default:a(t=>[f("span",{onClick:E=>p(le)(t.row.testCaseId),style:{cursor:"pointer",color:"blue"}},V(t.row.testCaseId),9,ge)]),_:1}),o(d,{prop:"execType",label:"\u7C7B\u578B",align:"center"},{default:a(t=>[t.row.execType===1?(u(),i(g,{key:0,type:"primary"},{default:a(()=>e[5]||(e[5]=[s("\u8C03\u8BD5")])),_:1})):_("",!0),t.row.execType===2?(u(),i(g,{key:1,type:"danger"},{default:a(()=>e[6]||(e[6]=[s("\u538B\u6D4B")])),_:1})):_("",!0)]),_:1}),o(d,{prop:"status",label:"\u72B6\u6001",align:"center"},{default:a(t=>[t.row.status===0?(u(),i(g,{key:0,type:"info"},{default:a(()=>e[7]||(e[7]=[s("\u6CA1\u6709\u6267\u884C")])),_:1})):_("",!0),t.row.status===1?(u(),i(g,{key:1,type:"warning"},{default:a(()=>e[8]||(e[8]=[s("\u6B63\u5728\u6267\u884C")])),_:1})):_("",!0),t.row.status===2?(u(),i(g,{key:2,type:"success"},{default:a(()=>e[9]||(e[9]=[s("\u6267\u884C\u6210\u529F")])),_:1})):_("",!0),t.row.status===3?(u(),i(g,{key:3,type:"danger"},{default:a(()=>e[10]||(e[10]=[s("\u6267\u884C\u5F02\u5E38")])),_:1})):_("",!0)]),_:1}),o(d,{prop:"responseData",label:"\u7ED3\u679C",align:"center"}),o(d,{prop:"creator",label:"\u521B\u5EFA\u4EBA",align:"center"}),o(d,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),o(d,{label:"\u64CD\u4F5C",width:"120",align:"center"},{default:a(t=>[F((u(),i(m,{style:{"margin-left":"0"},text:"",icon:p(h),class:"bg-blue",onClick:E=>(c.value=!0,$(t.row.id))},{default:a(()=>e[11]||(e[11]=[s(" \u67E5\u770B\u65E5\u5FD7 ")])),_:2},1032,["icon","onClick"])),[[k,1]]),F((u(),i(m,{style:{"margin-left":"0"},text:"",icon:p(K),class:"bg-blue",onClick:E=>j(t.row.id)},{default:a(()=>e[12]||(e[12]=[s(" \u62A5\u544A\u4E0B\u8F7D ")])),_:2},1032,["icon","onClick"])),[[k,1]]),F((u(),i(m,{style:{"margin-left":"0"},text:"",icon:p(Q),class:"bg-blue",onClick:E=>z(t.row.id)},{default:a(()=>e[13]||(e[13]=[s(" \u62A5\u544A\u9884\u89C8 ")])),_:2},1032,["icon","onClick"])),[[k,1]]),F((u(),i(m,{style:{"margin-left":"0"},text:"",icon:p(W),class:"red",onClick:E=>U(t.row.id)},{default:a(()=>e[14]||(e[14]=[s(" \u5220\u9664\u62A5\u544A ")])),_:2},1032,["icon","onClick"])),[[k,1]])]),_:1})]),_:1},8,["data"]),f("div",fe,[o(M,{background:"",layout:"total, prev, pager, next","current-page":l.page,"page-size":l.size,total:x.value,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),o(N,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),title:"jmeter.log\u65E5\u5FD7","show-close":!0,"with-header":!0,size:"60%"},{default:a(()=>[f("pre",null,[f("div",{textContent:V(A.value)},null,8,_e)])]),_:1},8,["modelValue"])])}}});const Fe=X(we,[["__scopeId","data-v-c9c31a31"]]);export{Fe as default};
